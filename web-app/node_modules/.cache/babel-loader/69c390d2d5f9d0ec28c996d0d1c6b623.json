{"ast":null,"code":"import { addDoc, deleteDoc, doc, getDocs, setDoc } from \"firebase/firestore\";\nimport { db, machineDBRef, registrationsDBRef, studentsDBRef } from \"../firebase\";\n\nconst getItemsDocs = async DBRef => {\n  let items = [];\n\n  try {\n    const snapshot = await getDocs(DBRef);\n    snapshot.docs.forEach(doc => {\n      items.push({ ...doc.data(),\n        id: doc.id\n      });\n    });\n  } catch {\n    console.error(\"Cant Fetch from DB\");\n  }\n\n  return items;\n};\n\nconst addItemDoc = async (DBRef, newDoc) => {\n  try {\n    await addDoc(DBRef, newDoc);\n  } catch {\n    console.error(\"Failed to add doc\");\n  }\n};\n\nconst addItemDocWithID = async (DBRefName, newDocId, newDocValue) => {\n  try {\n    const docRef = doc(db, DBRefName, newDocId);\n    await setDoc(docRef, newDocValue);\n  } catch {\n    console.error(\"Failed to add doc\");\n  }\n};\n\nconst deleteItemDoc = async (DBRefName, docID) => {\n  try {\n    const docRef = doc(db, DBRefName, docID);\n    await deleteDoc(docRef);\n  } catch {\n    console.error(\"Failed to add doc\");\n  }\n};\n\nexport const getMachinesDocs = () => getItemsDocs(machineDBRef);\nexport const getRegistrationDocs = () => getItemsDocs(registrationsDBRef);\nexport const getStudentsDocs = () => getItemsDocs(studentsDBRef);\nexport const getHisDocs = () => getItemsDocs(studentsDBRef);\nexport const addMachineDoc = newDoc => addItemDoc(machineDBRef, newDoc);\nexport const addRegistrationDoc = newDoc => addItemDoc(registrationsDBRef, newDoc);\nexport const addStudentDoc = (newDocId, newDocValue) => addItemDocWithID(\"Students\", newDocId, newDocValue); //export const addHistoryDoc = (newDocId, newDocValue) => addItemDocWithID(\"History\", newDocId, newDocValue);\n\nexport const deleteMachineDoc = docId => deleteItemDoc(\"Machines\", docId);\nexport const deleteRegistratioDoc = docId => deleteItemDoc(\"Registration\", docId);\nexport const deleteStudentDoc = docId => deleteItemDoc(\"Students\", docId);","map":{"version":3,"names":["addDoc","deleteDoc","doc","getDocs","setDoc","db","machineDBRef","registrationsDBRef","studentsDBRef","getItemsDocs","DBRef","items","snapshot","docs","forEach","push","data","id","console","error","addItemDoc","newDoc","addItemDocWithID","DBRefName","newDocId","newDocValue","docRef","deleteItemDoc","docID","getMachinesDocs","getRegistrationDocs","getStudentsDocs","getHisDocs","addMachineDoc","addRegistrationDoc","addStudentDoc","deleteMachineDoc","docId","deleteRegistratioDoc","deleteStudentDoc"],"sources":["/Users/toharayash/Desktop/technion/semester8/iot/iot-web-app/src/firebase/dbRef.js"],"sourcesContent":["import { addDoc, deleteDoc, doc, getDocs, setDoc } from \"firebase/firestore\";\nimport {\n  db,\n  machineDBRef,\n  registrationsDBRef,\n  studentsDBRef,\n} from \"../firebase\";\n\nconst getItemsDocs = async (DBRef) => {\n  let items = [];\n  try {\n    const snapshot = await getDocs(DBRef);\n    snapshot.docs.forEach((doc) => {\n      items.push({ ...doc.data(), id: doc.id });\n    });\n  } catch {\n    console.error(\"Cant Fetch from DB\");\n  }\n\n  return items;\n};\n\nconst addItemDoc = async (DBRef, newDoc) => {\n  try {\n    await addDoc(DBRef, newDoc);\n  } catch {\n    console.error(\"Failed to add doc\");\n  }\n};\n\nconst addItemDocWithID = async (DBRefName, newDocId, newDocValue) => {\n  try {\n    const docRef = doc(db, DBRefName, newDocId);\n    await setDoc(docRef, newDocValue);\n  } catch {\n    console.error(\"Failed to add doc\");\n  }\n};\n\nconst deleteItemDoc = async (DBRefName, docID) => {\n  try {\n    const docRef = doc(db, DBRefName, docID);\n    await deleteDoc(docRef);\n  } catch {\n    console.error(\"Failed to add doc\");\n  }\n};\n\nexport const getMachinesDocs = () => getItemsDocs(machineDBRef);\nexport const getRegistrationDocs = () => getItemsDocs(registrationsDBRef);\nexport const getStudentsDocs = () => getItemsDocs(studentsDBRef);\nexport const getHisDocs = () => getItemsDocs(studentsDBRef);\n\nexport const addMachineDoc = (newDoc) => addItemDoc(machineDBRef, newDoc);\nexport const addRegistrationDoc = (newDoc) =>  addItemDoc(registrationsDBRef, newDoc);\nexport const addStudentDoc = (newDocId, newDocValue) =>\n  addItemDocWithID(\"Students\", newDocId, newDocValue);\n//export const addHistoryDoc = (newDocId, newDocValue) => addItemDocWithID(\"History\", newDocId, newDocValue);\n\nexport const deleteMachineDoc = (docId) => deleteItemDoc(\"Machines\", docId);\nexport const deleteRegistratioDoc = (docId) =>\n  deleteItemDoc(\"Registration\", docId);\nexport const deleteStudentDoc = (docId) => deleteItemDoc(\"Students\", docId);\n"],"mappings":"AAAA,SAASA,MAAT,EAAiBC,SAAjB,EAA4BC,GAA5B,EAAiCC,OAAjC,EAA0CC,MAA1C,QAAwD,oBAAxD;AACA,SACEC,EADF,EAEEC,YAFF,EAGEC,kBAHF,EAIEC,aAJF,QAKO,aALP;;AAOA,MAAMC,YAAY,GAAG,MAAOC,KAAP,IAAiB;EACpC,IAAIC,KAAK,GAAG,EAAZ;;EACA,IAAI;IACF,MAAMC,QAAQ,GAAG,MAAMT,OAAO,CAACO,KAAD,CAA9B;IACAE,QAAQ,CAACC,IAAT,CAAcC,OAAd,CAAuBZ,GAAD,IAAS;MAC7BS,KAAK,CAACI,IAAN,CAAW,EAAE,GAAGb,GAAG,CAACc,IAAJ,EAAL;QAAiBC,EAAE,EAAEf,GAAG,CAACe;MAAzB,CAAX;IACD,CAFD;EAGD,CALD,CAKE,MAAM;IACNC,OAAO,CAACC,KAAR,CAAc,oBAAd;EACD;;EAED,OAAOR,KAAP;AACD,CAZD;;AAcA,MAAMS,UAAU,GAAG,OAAOV,KAAP,EAAcW,MAAd,KAAyB;EAC1C,IAAI;IACF,MAAMrB,MAAM,CAACU,KAAD,EAAQW,MAAR,CAAZ;EACD,CAFD,CAEE,MAAM;IACNH,OAAO,CAACC,KAAR,CAAc,mBAAd;EACD;AACF,CAND;;AAQA,MAAMG,gBAAgB,GAAG,OAAOC,SAAP,EAAkBC,QAAlB,EAA4BC,WAA5B,KAA4C;EACnE,IAAI;IACF,MAAMC,MAAM,GAAGxB,GAAG,CAACG,EAAD,EAAKkB,SAAL,EAAgBC,QAAhB,CAAlB;IACA,MAAMpB,MAAM,CAACsB,MAAD,EAASD,WAAT,CAAZ;EACD,CAHD,CAGE,MAAM;IACNP,OAAO,CAACC,KAAR,CAAc,mBAAd;EACD;AACF,CAPD;;AASA,MAAMQ,aAAa,GAAG,OAAOJ,SAAP,EAAkBK,KAAlB,KAA4B;EAChD,IAAI;IACF,MAAMF,MAAM,GAAGxB,GAAG,CAACG,EAAD,EAAKkB,SAAL,EAAgBK,KAAhB,CAAlB;IACA,MAAM3B,SAAS,CAACyB,MAAD,CAAf;EACD,CAHD,CAGE,MAAM;IACNR,OAAO,CAACC,KAAR,CAAc,mBAAd;EACD;AACF,CAPD;;AASA,OAAO,MAAMU,eAAe,GAAG,MAAMpB,YAAY,CAACH,YAAD,CAA1C;AACP,OAAO,MAAMwB,mBAAmB,GAAG,MAAMrB,YAAY,CAACF,kBAAD,CAA9C;AACP,OAAO,MAAMwB,eAAe,GAAG,MAAMtB,YAAY,CAACD,aAAD,CAA1C;AACP,OAAO,MAAMwB,UAAU,GAAG,MAAMvB,YAAY,CAACD,aAAD,CAArC;AAEP,OAAO,MAAMyB,aAAa,GAAIZ,MAAD,IAAYD,UAAU,CAACd,YAAD,EAAee,MAAf,CAA5C;AACP,OAAO,MAAMa,kBAAkB,GAAIb,MAAD,IAAaD,UAAU,CAACb,kBAAD,EAAqBc,MAArB,CAAlD;AACP,OAAO,MAAMc,aAAa,GAAG,CAACX,QAAD,EAAWC,WAAX,KAC3BH,gBAAgB,CAAC,UAAD,EAAaE,QAAb,EAAuBC,WAAvB,CADX,C,CAEP;;AAEA,OAAO,MAAMW,gBAAgB,GAAIC,KAAD,IAAWV,aAAa,CAAC,UAAD,EAAaU,KAAb,CAAjD;AACP,OAAO,MAAMC,oBAAoB,GAAID,KAAD,IAClCV,aAAa,CAAC,cAAD,EAAiBU,KAAjB,CADR;AAEP,OAAO,MAAME,gBAAgB,GAAIF,KAAD,IAAWV,aAAa,CAAC,UAAD,EAAaU,KAAb,CAAjD"},"metadata":{},"sourceType":"module"}