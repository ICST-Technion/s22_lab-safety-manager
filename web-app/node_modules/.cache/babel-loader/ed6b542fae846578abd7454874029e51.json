{"ast":null,"code":"import _objectSpread from\"/Users/toharayash/Desktop/technion/semester8/iot/iot-web-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/toharayash/Desktop/technion/semester8/iot/iot-web-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Users/toharayash/Desktop/technion/semester8/iot/iot-web-app/node_modules/@babel/runtime/regenerator/index.js\";import{addDoc,deleteDoc,doc,getDocs,setDoc}from\"firebase/firestore\";import{db,machineDBRef,registrationsDBRef,studentsDBRef,historyDBRef}from\"../firebase\";var getItemsDocs=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(DBRef){var items,snapshot;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:items=[];_context.prev=1;_context.next=4;return getDocs(DBRef);case 4:snapshot=_context.sent;snapshot.docs.forEach(function(doc){items.push(_objectSpread(_objectSpread({},doc.data()),{},{id:doc.id}));});_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);console.error(\"Cant Fetch from DB\");case 11:return _context.abrupt(\"return\",items);case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function getItemsDocs(_x){return _ref.apply(this,arguments);};}();var addItemDoc=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(DBRef,newDoc){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return addDoc(DBRef,newDoc);case 3:_context2.next=8;break;case 5:_context2.prev=5;_context2.t0=_context2[\"catch\"](0);console.error(\"Failed to add doc\");case 8:case\"end\":return _context2.stop();}}},_callee2,null,[[0,5]]);}));return function addItemDoc(_x2,_x3){return _ref2.apply(this,arguments);};}();var addItemDocWithID=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(DBRefName,newDocId,newDocValue){var docRef;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;docRef=doc(db,DBRefName,newDocId);_context3.next=4;return setDoc(docRef,newDocValue);case 4:_context3.next=9;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);console.error(\"Failed to add doc\");case 9:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));return function addItemDocWithID(_x4,_x5,_x6){return _ref3.apply(this,arguments);};}();var deleteItemDoc=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(DBRefName,docID){var docRef;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;docRef=doc(db,DBRefName,docID);_context4.next=4;return deleteDoc(docRef);case 4:_context4.next=9;break;case 6:_context4.prev=6;_context4.t0=_context4[\"catch\"](0);console.error(\"Failed to add doc\");case 9:case\"end\":return _context4.stop();}}},_callee4,null,[[0,6]]);}));return function deleteItemDoc(_x7,_x8){return _ref4.apply(this,arguments);};}();export var getMachinesDocs=function getMachinesDocs(){return getItemsDocs(machineDBRef);};export var getRegistrationDocs=function getRegistrationDocs(){return getItemsDocs(registrationsDBRef);};export var getStudentsDocs=function getStudentsDocs(){return getItemsDocs(studentsDBRef);};export var getHistoryDocs=function getHistoryDocs(){return getItemsDocs(historyDBRef);};export var addMachineDoc=function addMachineDoc(newDoc){return addItemDoc(machineDBRef,newDoc);};export var addRegistrationDoc=function addRegistrationDoc(newDoc){return addItemDoc(registrationsDBRef,newDoc);};export var addStudentDoc=function addStudentDoc(newDocId,newDocValue){return addItemDocWithID(\"Students\",newDocId,newDocValue);};export var addHistoryDoc=function addHistoryDoc(newDoc){return addItemDoc(historyDBRef,newDoc);};export var deleteMachineDoc=function deleteMachineDoc(docId){return deleteItemDoc(\"Machines\",docId);};export var deleteRegistratioDoc=function deleteRegistratioDoc(docId){return deleteItemDoc(\"Registration\",docId);};export var deleteStudentDoc=function deleteStudentDoc(docId){return deleteItemDoc(\"Students\",docId);};","map":{"version":3,"names":["addDoc","deleteDoc","doc","getDocs","setDoc","db","machineDBRef","registrationsDBRef","studentsDBRef","historyDBRef","getItemsDocs","DBRef","items","snapshot","docs","forEach","push","data","id","console","error","addItemDoc","newDoc","addItemDocWithID","DBRefName","newDocId","newDocValue","docRef","deleteItemDoc","docID","getMachinesDocs","getRegistrationDocs","getStudentsDocs","getHistoryDocs","addMachineDoc","addRegistrationDoc","addStudentDoc","addHistoryDoc","deleteMachineDoc","docId","deleteRegistratioDoc","deleteStudentDoc"],"sources":["/Users/toharayash/Desktop/technion/semester8/iot/iot-web-app/src/firebase/dbRef.js"],"sourcesContent":["import { addDoc, deleteDoc, doc, getDocs, setDoc } from \"firebase/firestore\";\nimport {\n  db,\n  machineDBRef,\n  registrationsDBRef,\n  studentsDBRef,\n  historyDBRef,\n} from \"../firebase\";\n\nconst getItemsDocs = async (DBRef) => {\n  let items = [];\n  try {\n    const snapshot = await getDocs(DBRef);\n    snapshot.docs.forEach((doc) => {\n      items.push({ ...doc.data(), id: doc.id });\n    });\n  } catch {\n    console.error(\"Cant Fetch from DB\");\n  }\n\n  return items;\n};\n\nconst addItemDoc = async (DBRef, newDoc) => {\n  try {\n    await addDoc(DBRef, newDoc);\n  } catch {\n    console.error(\"Failed to add doc\");\n  }\n};\n\nconst addItemDocWithID = async (DBRefName, newDocId, newDocValue) => {\n  try {\n    const docRef = doc(db, DBRefName, newDocId);\n    await setDoc(docRef, newDocValue);\n  } catch {\n    console.error(\"Failed to add doc\");\n  }\n};\n\nconst deleteItemDoc = async (DBRefName, docID) => {\n  try {\n    const docRef = doc(db, DBRefName, docID);\n    await deleteDoc(docRef);\n  } catch {\n    console.error(\"Failed to add doc\");\n  }\n};\n\nexport const getMachinesDocs = () => getItemsDocs(machineDBRef);\nexport const getRegistrationDocs = () => getItemsDocs(registrationsDBRef);\nexport const getStudentsDocs = () => getItemsDocs(studentsDBRef);\nexport const getHistoryDocs = () => getItemsDocs(historyDBRef);\n\nexport const addMachineDoc = (newDoc) => addItemDoc(machineDBRef, newDoc);\nexport const addRegistrationDoc = (newDoc) =>  addItemDoc(registrationsDBRef, newDoc);\nexport const addStudentDoc = (newDocId, newDocValue) =>\n  addItemDocWithID(\"Students\", newDocId, newDocValue);\nexport const addHistoryDoc = (newDoc) => addItemDoc(historyDBRef, newDoc);\n\n\nexport const deleteMachineDoc = (docId) => deleteItemDoc(\"Machines\", docId);\nexport const deleteRegistratioDoc = (docId) =>\n  deleteItemDoc(\"Registration\", docId);\nexport const deleteStudentDoc = (docId) => deleteItemDoc(\"Students\", docId);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}